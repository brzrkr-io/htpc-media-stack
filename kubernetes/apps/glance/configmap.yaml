---
apiVersion: v1
kind: ConfigMap
metadata:
  name: glance-config
  namespace: glance
data:
  glance.yml: |
    theme:
      background-color: 220 20 8
      primary-color: 217 90 75
      positive-color: 140 70 65
      negative-color: 0 70 60

    pages:
      - name: Home
        width: wide
        columns:
          - size: small
            widgets:
              - type: clock
                hour-format: 12h
                timezones:
                  - timezone: America/New_York
                    label: Local
                  - timezone: UTC
                    label: UTC

              - type: weather
                location: New York, United States
                units: imperial
                hour-format: 12h
                hide-location: false

              - type: markets
                title: Markets
                markets:
                  - symbol: SPY
                    name: S&P 500
                  - symbol: BTC-USD
                    name: Bitcoin
                  - symbol: ETH-USD
                    name: Ethereum
                  - symbol: NVDA
                    name: NVIDIA
                  - symbol: AAPL
                    name: Apple

              - type: monitor
                cache: 1m
                title: Services
                sites:
                  - title: Jellyfin
                    url: http://jellyfin.media.svc.cluster.local:8096
                    icon: si:jellyfin
                  - title: Sonarr
                    url: http://sonarr.media.svc.cluster.local:8989
                    icon: si:sonarr
                  - title: Radarr
                    url: http://radarr.media.svc.cluster.local:7878
                    icon: si:radarr
                  - title: Prowlarr
                    url: http://prowlarr.media.svc.cluster.local:9696
                    icon: si:prowlarr
                  - title: SABnzbd
                    url: http://sabnzbd.downloads.svc.cluster.local:8080
                    icon: si:sabnzbd
                  - title: Transmission
                    url: http://gluetun-transmission.downloads.svc.cluster.local:9091
                    icon: si:transmission
                  - title: Bazarr
                    url: http://bazarr.media.svc.cluster.local:6767
                    icon: si:bazarr

          - size: full
            widgets:
              - type: bookmarks
                groups:
                  - title: Media
                    color: 217 90 75
                    links:
                      - title: Jellyfin
                        url: https://jellyfin.brzrkr.io
                        icon: si:jellyfin
                      - title: Jellyseerr
                        url: https://request.brzrkr.io
                        icon: si:jellyfin
                      - title: Sonarr
                        url: https://sonarr.brzrkr.io
                        icon: si:sonarr
                      - title: Radarr
                        url: https://radarr.brzrkr.io
                        icon: si:radarr
                      - title: Prowlarr
                        url: https://prowlarr.brzrkr.io
                        icon: si:prowlarr
                      - title: Bazarr
                        url: https://bazarr.brzrkr.io
                        icon: si:bazarr

                  - title: Downloads
                    color: 140 70 65
                    links:
                      - title: SABnzbd
                        url: https://sabnzbd.brzrkr.io
                        icon: si:sabnzbd
                      - title: Transmission
                        url: https://transmission.brzrkr.io
                        icon: si:transmission

                  - title: Monitoring
                    color: 35 90 65
                    links:
                      - title: Grafana
                        url: https://grafana.brzrkr.io
                        icon: si:grafana
                      - title: Prometheus
                        url: https://prometheus.brzrkr.io
                        icon: si:prometheus
                      - title: Uptime Kuma
                        url: https://status.brzrkr.io
                        icon: si:uptimekuma
                      - title: Glances
                        url: https://stats.brzrkr.io
                        icon: si:gnome

                  - title: Tools
                    color: 280 70 65
                    links:
                      - title: IT-Tools
                        url: https://tools.brzrkr.io
                        icon: si:hackthebox
                      - title: Stirling PDF
                        url: https://pdf.brzrkr.io
                        icon: si:adobeacrobatreader
                      - title: Speedtest
                        url: https://speedtest.brzrkr.io
                        icon: si:speedtest

              - type: hacker-news
                title: Hacker News
                limit: 10
                collapse-after: 5

              - type: rss
                title: Tech News
                style: horizontal-cards
                feeds:
                  - url: https://www.theverge.com/rss/index.xml
                    title: The Verge
                  - url: https://feeds.arstechnica.com/arstechnica/index
                    title: Ars Technica
                  - url: https://www.wired.com/feed/rss
                    title: Wired
                limit: 9
                collapse-after: 3

          - size: small
            widgets:
              - type: releases
                title: Software Releases
                repositories:
                  - Sonarr/Sonarr
                  - Radarr/Radarr
                  - Prowlarr/Prowlarr
                  - jellyfin/jellyfin
                  - Bazarr/Bazarr
                  - sabnzbd/sabnzbd
                  - glanceapp/glance

              - type: reddit
                subreddit: selfhosted
                title: r/selfhosted
                style: vertical-cards
                limit: 5
                collapse-after: 3

              - type: reddit
                subreddit: homelab
                title: r/homelab
                style: vertical-cards
                limit: 5
                collapse-after: 3

      - name: Tech
        width: wide
        columns:
          - size: small
            widgets:
              - type: hacker-news
                title: Hacker News
                limit: 15
                collapse-after: 10

              - type: lobsters
                title: Lobsters
                limit: 10
                collapse-after: 5

          - size: full
            widgets:
              - type: rss
                title: Tech News
                style: detailed-list
                feeds:
                  - url: https://www.theverge.com/rss/index.xml
                    title: The Verge
                  - url: https://feeds.arstechnica.com/arstechnica/index
                    title: Ars Technica
                  - url: https://www.wired.com/feed/rss
                    title: Wired
                  - url: https://techcrunch.com/feed/
                    title: TechCrunch
                  - url: https://www.engadget.com/rss.xml
                    title: Engadget
                limit: 20
                collapse-after: 10

          - size: small
            widgets:
              - type: reddit
                subreddit: technology
                title: r/technology
                style: vertical-cards
                limit: 10
                collapse-after: 5

              - type: reddit
                subreddit: programming
                title: r/programming
                style: vertical-cards
                limit: 10
                collapse-after: 5

      - name: Media
        width: wide
        columns:
          - size: small
            widgets:
              - type: monitor
                cache: 1m
                title: Media Stack
                sites:
                  - title: Jellyfin
                    url: http://jellyfin.media.svc.cluster.local:8096
                    icon: si:jellyfin
                  - title: Jellyseerr
                    url: http://jellyseerr.media.svc.cluster.local:5055
                    icon: si:jellyfin
                  - title: Sonarr
                    url: http://sonarr.media.svc.cluster.local:8989
                    icon: si:sonarr
                  - title: Radarr
                    url: http://radarr.media.svc.cluster.local:7878
                    icon: si:radarr
                  - title: Prowlarr
                    url: http://prowlarr.media.svc.cluster.local:9696
                    icon: si:prowlarr
                  - title: Bazarr
                    url: http://bazarr.media.svc.cluster.local:6767
                    icon: si:bazarr

              - type: custom-api
                title: Sonarr Stats
                cache: 5m
                url: http://sonarr.media.svc.cluster.local:8989/api/v3/wanted/missing?pageSize=1
                headers:
                  X-Api-Key: 90a00b9e090b4f0f803fd3fb1298faa0
                template: |
                  {{ $series := newRequest "http://sonarr.media.svc.cluster.local:8989/api/v3/series"
                    | withHeader "X-Api-Key" "90a00b9e090b4f0f803fd3fb1298faa0"
                    | getResponse }}
                  <ul class="list-gap-10 collapsible-container" data-collapse-after="5">
                    <li>Series Monitored: <strong>{{ len ($series.JSON.Array "") }}</strong></li>
                    <li>Missing Episodes: <strong>{{ .JSON.Int "totalRecords" }}</strong></li>
                  </ul>

              - type: custom-api
                title: Radarr Stats
                cache: 5m
                url: http://radarr.media.svc.cluster.local:7878/api/v3/wanted/missing?pageSize=1
                headers:
                  X-Api-Key: 6a16b3b4b8da4dcaa522d49b27fd2f16
                template: |
                  {{ $movies := newRequest "http://radarr.media.svc.cluster.local:7878/api/v3/movie"
                    | withHeader "X-Api-Key" "6a16b3b4b8da4dcaa522d49b27fd2f16"
                    | getResponse }}
                  <ul class="list-gap-10 collapsible-container" data-collapse-after="5">
                    <li>Movies Tracked: <strong>{{ len ($movies.JSON.Array "") }}</strong></li>
                    <li>Missing Movies: <strong>{{ .JSON.Int "totalRecords" }}</strong></li>
                  </ul>

              - type: releases
                title: Media Tool Updates
                repositories:
                  - Sonarr/Sonarr
                  - Radarr/Radarr
                  - Prowlarr/Prowlarr
                  - jellyfin/jellyfin
                  - Bazarr/Bazarr
                  - Fallenbagel/jellyseerr

          - size: full
            widgets:
              - type: custom-api
                title: SABnzbd Downloads
                cache: 30s
                url: http://sabnzbd.downloads.svc.cluster.local:8080/api?mode=queue&output=json&apikey=6ae647c8f6554f33ba2ceae7ff075b27
                template: |
                  <ul class="list-gap-10 collapsible-container" data-collapse-after="6">
                    <li>Status: <strong>{{ if .JSON.Bool "queue.paused" }}Paused{{ else }}Downloading{{ end }}</strong></li>
                    <li>Speed: <strong>{{ .JSON.String "queue.speed" }}/s</strong></li>
                    <li>Queue Size: <strong>{{ .JSON.String "queue.sizeleft" }} remaining</strong></li>
                    <li>Disk Space: <strong>{{ .JSON.String "queue.diskspace1_norm" }} free</strong></li>
                    <li>Cache: <strong>{{ .JSON.String "queue.cache_size" }}</strong></li>
                    {{ range .JSON.Array "queue.slots" }}
                    <li>{{ .String "filename" }} - {{ .String "percentage" }}% ({{ .String "sizeleft" }} left)</li>
                    {{ end }}
                  </ul>

              - type: bookmarks
                groups:
                  - title: Media Apps
                    color: 217 90 75
                    links:
                      - title: Jellyfin
                        url: https://jellyfin.brzrkr.io
                        icon: si:jellyfin
                      - title: Jellyseerr
                        url: https://request.brzrkr.io
                        icon: si:jellyfin
                      - title: Sonarr
                        url: https://sonarr.brzrkr.io
                        icon: si:sonarr
                      - title: Radarr
                        url: https://radarr.brzrkr.io
                        icon: si:radarr
                      - title: Prowlarr
                        url: https://prowlarr.brzrkr.io
                        icon: si:prowlarr
                      - title: Bazarr
                        url: https://bazarr.brzrkr.io
                        icon: si:bazarr

              - type: reddit
                subreddit: plex
                title: r/plex
                style: horizontal-cards
                limit: 6
                collapse-after: 3

              - type: reddit
                subreddit: jellyfin
                title: r/jellyfin
                style: horizontal-cards
                limit: 6
                collapse-after: 3

          - size: small
            widgets:
              - type: custom-api
                title: Transmission Torrents
                cache: 30s
                url: http://gluetun-transmission.downloads.svc.cluster.local:9091/transmission/rpc
                method: POST
                headers:
                  Content-Type: application/json
                body-type: json
                body:
                  method: torrent-get
                  arguments:
                    fields:
                      - name
                      - status
                      - percentDone
                      - rateDownload
                      - rateUpload
                template: |
                  {{ $torrents := .JSON.Array "arguments.torrents" }}
                  <ul class="list-gap-10 collapsible-container" data-collapse-after="5">
                    <li>Total Torrents: <strong>{{ len $torrents }}</strong></li>
                    {{ range $torrents }}
                    <li>{{ .String "name" | trimPrefix "" }} - {{ mul (.Float "percentDone") 100 | formatNumber 1 }}%</li>
                    {{ end }}
                  </ul>

              - type: reddit
                subreddit: sonarr
                title: r/sonarr
                style: vertical-cards
                limit: 5
                collapse-after: 3

              - type: reddit
                subreddit: radarr
                title: r/radarr
                style: vertical-cards
                limit: 5
                collapse-after: 3

      - name: Downloads
        columns:
          - size: small
            widgets:
              - type: monitor
                cache: 1m
                title: Download Stack
                sites:
                  - title: SABnzbd
                    url: http://sabnzbd.downloads.svc.cluster.local:8080
                    icon: si:sabnzbd
                  - title: Transmission
                    url: http://gluetun-transmission.downloads.svc.cluster.local:9091
                    icon: si:transmission
                  - title: Prowlarr
                    url: http://prowlarr.media.svc.cluster.local:9696
                    icon: si:prowlarr
                  - title: FlareSolverr
                    url: http://flaresolverr.downloads.svc.cluster.local:8191
                    icon: si:cloudflare

              - type: custom-api
                title: SABnzbd Queue
                cache: 30s
                url: http://sabnzbd.downloads.svc.cluster.local:8080/api?mode=queue&output=json&apikey=6ae647c8f6554f33ba2ceae7ff075b27
                template: |
                  <ul class="list-gap-10 collapsible-container" data-collapse-after="8">
                    <li>Status: <strong>{{ if .JSON.Bool "queue.paused" }}Paused{{ else }}Active{{ end }}</strong></li>
                    <li>Speed: <strong>{{ .JSON.String "queue.speed" }}/s</strong></li>
                    <li>Remaining: <strong>{{ .JSON.String "queue.sizeleft" }}</strong></li>
                    <li>Disk Free: <strong>{{ .JSON.String "queue.diskspace1_norm" }}</strong></li>
                    {{ range .JSON.Array "queue.slots" }}
                    <li>{{ .String "filename" }} - {{ .String "percentage" }}%</li>
                    {{ end }}
                  </ul>

          - size: full
            widgets:
              - type: custom-api
                title: Transmission Active Torrents
                cache: 30s
                url: http://gluetun-transmission.downloads.svc.cluster.local:9091/transmission/rpc
                method: POST
                headers:
                  Content-Type: application/json
                body-type: json
                body:
                  method: torrent-get
                  arguments:
                    fields:
                      - name
                      - status
                      - percentDone
                      - rateDownload
                      - rateUpload
                      - eta
                template: |
                  {{ $torrents := .JSON.Array "arguments.torrents" }}
                  <ul class="list-gap-10 collapsible-container" data-collapse-after="10">
                    <li>Total Torrents: <strong>{{ len $torrents }}</strong></li>
                    {{ range $torrents }}
                    <li>{{ .String "name" }} - {{ mul (.Float "percentDone") 100 | formatNumber 1 }}%</li>
                    {{ end }}
                  </ul>

              - type: bookmarks
                groups:
                  - title: Download Clients
                    color: 140 70 65
                    links:
                      - title: SABnzbd
                        url: https://sabnzbd.brzrkr.io
                        icon: si:sabnzbd
                      - title: Transmission
                        url: https://transmission.brzrkr.io
                        icon: si:transmission
                  - title: Indexers
                    color: 217 90 75
                    links:
                      - title: Prowlarr
                        url: https://prowlarr.brzrkr.io
                        icon: si:prowlarr

              - type: reddit
                subreddit: usenet
                title: r/usenet
                style: horizontal-cards
                limit: 6
                collapse-after: 3

          - size: small
            widgets:
              - type: custom-api
                title: FlareSolverr
                cache: 1m
                url: http://flaresolverr.downloads.svc.cluster.local:8191/
                template: |
                  <ul class="list-gap-10 collapsible-container" data-collapse-after="3">
                    <li>Status: <strong>{{ .JSON.String "msg" }}</strong></li>
                    <li>Version: <strong>{{ .JSON.String "version" }}</strong></li>
                    <li>User-Agent: <strong>{{ .JSON.String "userAgent" }}</strong></li>
                  </ul>

              - type: releases
                title: Download Tools
                repositories:
                  - sabnzbd/sabnzbd
                  - transmission/transmission
                  - Prowlarr/Prowlarr

      - name: Monitoring
        columns:
          - size: small
            widgets:
              - type: monitor
                cache: 1m
                title: All Services
                sites:
                  - title: Jellyfin
                    url: http://jellyfin.media.svc.cluster.local:8096
                    icon: si:jellyfin
                  - title: Sonarr
                    url: http://sonarr.media.svc.cluster.local:8989
                    icon: si:sonarr
                  - title: Radarr
                    url: http://radarr.media.svc.cluster.local:7878
                    icon: si:radarr
                  - title: Prowlarr
                    url: http://prowlarr.media.svc.cluster.local:9696
                    icon: si:prowlarr
                  - title: SABnzbd
                    url: http://sabnzbd.downloads.svc.cluster.local:8080
                    icon: si:sabnzbd
                  - title: Transmission
                    url: http://gluetun-transmission.downloads.svc.cluster.local:9091
                    icon: si:transmission
                  - title: Bazarr
                    url: http://bazarr.media.svc.cluster.local:6767
                    icon: si:bazarr
                  - title: FlareSolverr
                    url: http://flaresolverr.downloads.svc.cluster.local:8191
                    icon: si:cloudflare
                  - title: Loki
                    url: http://loki.monitoring.svc.cluster.local:3100/ready
                    icon: si:grafana
                  - title: Grafana
                    url: http://grafana.monitoring.svc.cluster.local:3000
                    icon: si:grafana
                  - title: Prometheus
                    url: http://prometheus.monitoring.svc.cluster.local:9090
                    icon: si:prometheus

          - size: full
            widgets:
              - type: bookmarks
                groups:
                  - title: Dashboards
                    color: 35 90 65
                    links:
                      - title: Grafana
                        url: https://grafana.brzrkr.io
                        icon: si:grafana
                      - title: Prometheus
                        url: https://prometheus.brzrkr.io
                        icon: si:prometheus
                      - title: Uptime Kuma
                        url: https://status.brzrkr.io
                        icon: si:uptimekuma

          - size: small
            widgets:
              - type: releases
                title: Monitoring Tools
                repositories:
                  - grafana/grafana
                  - prometheus/prometheus
                  - louislam/uptime-kuma

      - name: Markets
        width: wide
        columns:
          - size: full
            widgets:
              - type: markets
                title: Stocks & Crypto
                markets:
                  - symbol: SPY
                    name: S&P 500
                  - symbol: QQQ
                    name: NASDAQ 100
                  - symbol: DIA
                    name: Dow Jones
                  - symbol: BTC-USD
                    name: Bitcoin
                  - symbol: ETH-USD
                    name: Ethereum
                  - symbol: SOL-USD
                    name: Solana
                  - symbol: NVDA
                    name: NVIDIA
                  - symbol: AAPL
                    name: Apple
                  - symbol: MSFT
                    name: Microsoft
                  - symbol: GOOGL
                    name: Google
                  - symbol: AMZN
                    name: Amazon
                  - symbol: META
                    name: Meta
                  - symbol: TSLA
                    name: Tesla

      - name: Tools
        width: wide
        columns:
          - size: small
            widgets:
              - type: monitor
                cache: 1m
                title: Tool Status
                sites:
                  - title: IT-Tools
                    url: http://it-tools.tools.svc.cluster.local:80
                    icon: si:hackthebox
                  - title: Stirling PDF
                    url: http://stirling-pdf.tools.svc.cluster.local:8080
                    icon: si:adobeacrobatreader
                  - title: Speedtest
                    url: http://speedtest.tools.svc.cluster.local:80
                    icon: si:speedtest

              - type: iframe
                source: https://stats.brzrkr.io
                height: 400

          - size: full
            widgets:
              - type: bookmarks
                groups:
                  - title: Utilities
                    color: 280 70 65
                    links:
                      - title: IT-Tools
                        url: https://tools.brzrkr.io
                        icon: si:hackthebox
                      - title: Stirling PDF
                        url: https://pdf.brzrkr.io
                        icon: si:adobeacrobatreader
                      - title: Speedtest Tracker
                        url: https://speedtest.brzrkr.io
                        icon: si:speedtest
                      - title: Glances
                        url: https://stats.brzrkr.io
                        icon: si:gnome

          - size: small
            widgets:
              - type: releases
                title: Tool Updates
                repositories:
                  - CorentinTh/it-tools
                  - Stirling-Tools/Stirling-PDF
                  - alexjustesen/speedtest-tracker
                  - nicolargo/glances
